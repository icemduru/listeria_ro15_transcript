"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[9025],{89025:function(e,n,r){r.r(n),r.d(n,{default:function(){return fe}});var t=r(96234),a=r(68079),o=r(33028),s=r(30969),l=r(9077),i=r(1108),c=r(94927),d=r(70054),u=r(28744),x=r(20098),p=r(2374),h=r(90550),v=r(40909),m=r(74125),j=r(23038),f=r(86498),Z=r(88981),g=r(35436),b=r(30878),y=r(49197),C=r(40506),k=r(10679),N=r(66581),T=r(65410),S=r(60516),w=r(64640),L=r(3562),A=r(78742),M=r(21268),I=r(28712),F=r(65629),P=r(10814),E=r(3715),W=r(86264),H=r(88503),O=r(78136),V=r(69852),D=r(37574),_=(0,h.observer)((function(e){var n=e.slot,r=(0,s.useState)(""),a=(0,t.Z)(r,2),o=a[0],l=a[1],i=(0,s.useState)(!1),c=(0,t.Z)(i,2),d=c[0],u=c[1];return(0,D.jsxs)(D.Fragment,{children:[n.name?(0,D.jsx)(y.Z,{children:n.name}):null,(0,D.jsxs)(H.Z,{disablePadding:!0,children:[n.value.map((function(e,r){return(0,D.jsx)(O.ZP,{disableGutters:!0,children:(0,D.jsx)(g.Z,{value:e,onChange:function(e){return n.setAtIndex(r,e.target.value)},InputProps:{endAdornment:(0,D.jsx)(S.Z,{position:"end",children:(0,D.jsx)(N.Z,{color:"secondary",onClick:function(){return n.removeAtIndex(r)},children:(0,D.jsx)(P.Z,{})})})}})},r)})),d?(0,D.jsx)(O.ZP,{disableGutters:!0,children:(0,D.jsx)(g.Z,{value:o,placeholder:"add new",onChange:function(e){return l(e.target.value)},InputProps:{endAdornment:(0,D.jsx)(S.Z,{position:"end",children:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(V.Z,{color:"primary",variant:"contained",style:{margin:2},"data-testid":"stringArrayAdd-".concat(n.name),onClick:function(){u(!1),n.add(o),l("")},children:"OK"}),(0,D.jsx)(V.Z,{color:"primary",variant:"contained",style:{margin:2},onClick:function(){u(!1),l("")},children:"Cancel"})]})})}})}):null,(0,D.jsx)(V.Z,{color:"primary",variant:"contained",style:{margin:4},disabled:d,onClick:function(){return u(!0)},children:"Add item"})]}),(0,D.jsx)(w.Z,{children:n.description})]})})),z=r(21777),K=r(81073),B=r(32665),U=r(21165),G='Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace',J=(0,p.ZL)()((function(e){return{callbackEditor:{marginTop:"16px",borderBottom:"1px solid ".concat(e.palette.divider),width:"100%",fontFamily:G},textAreaFont:{fontFamily:G},callbackContainer:{width:"100%",overflowX:"auto"},error:{color:"red",fontSize:"0.8em"}}}));var X=(0,h.observer)((function(e){var n=e.slot,r=J().classes,a=(0,s.useState)(n.value),o=(0,t.Z)(a,2),l=o[0],i=o[1],c=(0,s.useState)(),d=(0,t.Z)(c,2),u=d[0],x=d[1],p=(0,K.useDebounce)(l,400);return(0,s.useEffect)((function(){try{var e,r=p.startsWith("jexl:")?p:"jexl:".concat(p);if("jexl:"===r)throw new Error("Empty jexl expression is not valid");(0,B.P)(r,null===(e=(0,v.getEnv)(n).pluginManager)||void 0===e?void 0:e.jexl),n.set(r),x(void 0)}catch(t){console.error({e:t}),x(t)}}),[p,n]),(0,D.jsxs)(D.Fragment,{children:[u?(0,D.jsx)("p",{className:r.error,children:"".concat(u)}):null,(0,D.jsxs)("div",{className:r.callbackContainer,children:[(0,D.jsx)(g.Z,{multiline:!0,className:r.callbackEditor,value:l.startsWith("jexl:")?l.split("jexl:")[1]:l,onChange:function(e){return i(e.target.value)},style:{background:u?"#fdd":void 0},InputProps:{classes:{input:r.textAreaFont}}}),(0,D.jsx)("p",{children:n.description}),(0,D.jsx)(z.Z,{title:(0,D.jsxs)("div",{children:["Callbacks are written in Jexl format. Click to learn more.",(0,D.jsx)("br",{})," Names of available context items: ",n.contextVariable]}),arrow:!0,children:(0,D.jsx)(N.Z,{color:"primary",onClick:function(){var e=window.open("https://github.com/TomFrost/Jexl","_blank","noopener,noreferrer");e&&(e.opener=null)},children:(0,D.jsx)(U.Z,{})})})]})]})})),R=(0,s.lazy)((function(){return Promise.all([r.e(8218),r.e(9101)]).then(r.bind(r,9101))})),q=function(e){var n=e.value,r=void 0===n?"#000":n,a=e.label,l=void 0===a?"":a,i=e.TextFieldProps,c=void 0===i?{}:i,d=e.onChange,u=(0,s.useState)(!1),x=(0,t.Z)(u,2),p=x[0],h=x[1];return(0,D.jsxs)("div",{style:{display:"flex"},children:[(0,D.jsx)(g.Z,(0,o.Z)({value:r,label:l,onClick:function(){return h(!p)},onChange:function(e){return d(e.target.value)}},c)),(0,D.jsx)("div",{style:{marginTop:10},children:(0,D.jsx)(s.Suspense,{fallback:(0,D.jsx)("div",{}),children:(0,D.jsx)(R,{color:r,onChange:function(e){return d(e)}})})})]})};var Q=(0,h.observer)((function(e){var n=e.slot;return(0,D.jsx)(q,{label:n.name,value:n.value,onChange:function(e){return n.set(e)},TextFieldProps:{helperText:n.description,fullWidth:!0}})})),Y=r(56111);function $(e){var n=e.helperText;return(0,D.jsx)(g.Z,(0,o.Z)((0,o.Z)({},e),{},{helperText:(0,D.jsx)(f.SanitizedHTML,{html:n||""}),FormHelperTextProps:{component:"div"},fullWidth:!0}))}var ee=(0,h.observer)((function(e){var n=e.slot;return(0,D.jsx)($,{label:n.name,helperText:n.description,value:n.value,onChange:function(e){return n.set(e.target.value)}})})),ne=(0,h.observer)((function(e){var n=e.slot;return(0,D.jsx)(g.Z,{label:n.name,helperText:n.description,multiline:!0,value:n.value,onChange:function(e){return n.set(e.target.value)}})})),re=function(){return(0,D.jsx)(b.Z,{children:(0,D.jsx)("path",{d:"M20.41,3C21.8,5.71 22.35,8.84 22,12C21.8,15.16 20.7,18.29 18.83,21L17.3,20C18.91,17.57 19.85,14.8 20,12C20.34,9.2 19.89,6.43 18.7,4L20.41,3M5.17,3L6.7,4C5.09,6.43 4.15,9.2 4,12C3.66,14.8 4.12,17.57 5.3,20L3.61,21C2.21,18.29 1.65,15.17 2,12C2.2,8.84 3.3,5.71 5.17,3M12.08,10.68L14.4,7.45H16.93L13.15,12.45L15.35,17.37H13.09L11.71,14L9.28,17.33H6.76L10.66,12.21L8.53,7.45H10.8L12.08,10.68Z"})})},te=(0,p.ZL)()((function(e){return{card:{marginTop:e.spacing(1)}}})),ae=(0,h.observer)((function(e){var n=e.slot,r=te().classes,a=(0,s.useState)(""),o=(0,t.Z)(a,2),l=o[0],i=o[1];return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(y.Z,{children:n.name}),Array.from(n.value,(function(e){var a=(0,t.Z)(e,2),o=a[0],s=a[1];return(0,D.jsxs)(C.Z,{raised:!0,className:r.card,children:[(0,D.jsx)(k.Z,{title:o,action:(0,D.jsx)(N.Z,{color:"secondary",onClick:function(){return n.remove(o)},children:(0,D.jsx)(P.Z,{})})}),(0,D.jsx)(T.Z,{children:(0,D.jsx)(_,{slot:{name:n.name,value:s,description:"Values associated with entry ".concat(o),setAtIndex:function(e,r){return n.setAtKeyIndex(o,e,r)},removeAtIndex:function(e){return n.removeAtKeyIndex(o,e)},add:function(e){return n.addToKey(o,e)}}})})]},o)})),(0,D.jsx)(C.Z,{raised:!0,className:r.card,children:(0,D.jsx)(k.Z,{disableTypography:!0,title:(0,D.jsx)(g.Z,{fullWidth:!0,value:l,placeholder:"add new",onChange:function(e){return i(e.target.value)},InputProps:{endAdornment:(0,D.jsx)(S.Z,{position:"end",children:(0,D.jsx)(N.Z,{disabled:""===l,onClick:function(){n.add(l,[]),i("")},color:"secondary",children:(0,D.jsx)(E.Z,{})})})}})})}),(0,D.jsx)(w.Z,{children:n.description})]})})),oe=(0,h.observer)((function(e){var n=e.slot,r=te().classes,a=(0,s.useState)(""),o=(0,t.Z)(a,2),l=o[0],i=o[1];return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(y.Z,{children:n.name}),Array.from(n.value,(function(e){var a=(0,t.Z)(e,2),o=a[0],s=a[1];return(0,D.jsxs)(C.Z,{raised:!0,className:r.card,children:[(0,D.jsx)(k.Z,{title:o,action:(0,D.jsx)(N.Z,{color:"secondary",onClick:function(){return n.remove(o)},children:(0,D.jsx)(P.Z,{})})}),(0,D.jsx)(T.Z,{children:(0,D.jsx)(se,{slot:{value:s,set:function(e){return n.add(o,e)}}})})]},o)})),(0,D.jsx)(C.Z,{raised:!0,className:r.card,children:(0,D.jsx)(k.Z,{disableTypography:!0,title:(0,D.jsx)(g.Z,{fullWidth:!0,value:l,placeholder:"add new",onChange:function(e){return i(e.target.value)},InputProps:{endAdornment:(0,D.jsx)(S.Z,{position:"end",children:(0,D.jsx)(N.Z,{disabled:""===l,onClick:function(){n.add(l,0),i("")},color:"secondary",children:(0,D.jsx)(E.Z,{})})})}})})}),(0,D.jsx)(w.Z,{children:n.description})]})})),se=(0,h.observer)((function(e){var n=e.slot,r=(0,s.useState)(n.value),a=(0,t.Z)(r,2),o=a[0],l=a[1];return(0,s.useEffect)((function(){var e,r=parseFloat(o);Number.isNaN(r)?null===(e=n.reset)||void 0===e||e.call(n):n.set(r)}),[n,o]),(0,D.jsx)($,{label:n.name,helperText:n.description,value:o,type:"number",onChange:function(e){return l(e.target.value)}})})),le=(0,h.observer)((function(e){var n=e.slot,r=(0,s.useState)(n.value),a=(0,t.Z)(r,2),o=a[0],l=a[1];return(0,s.useEffect)((function(){var e=parseInt(o,10);Number.isNaN(e)||n.set(e)}),[n,o]),(0,D.jsx)($,{label:n.name,helperText:n.description,value:o,type:"number",onChange:function(e){return l(e.target.value)}})})),ie=(0,h.observer)((function(e){var n=e.slot;return(0,D.jsxs)(L.Z,{children:[(0,D.jsx)(A.Z,{label:n.name,control:(0,D.jsx)(M.Z,{checked:n.value,onChange:function(e){return n.set(e.target.checked)}})}),(0,D.jsx)(w.Z,{children:n.description})]})})),ce=(0,h.observer)((function(e){var n=e.slot,r=e.slotSchema,t=(0,v.getPropertyMembers)((0,Z.getSubType)(r)),a=(0,Z.getUnionSubTypes)((0,Z.getUnionSubTypes)((0,Z.getSubType)((0,Z.getPropertyType)(t,"value")))[1]).map((function(e){return e.value}));return(0,D.jsx)($,{value:n.value,label:n.name,select:!0,helperText:n.description,onChange:function(e){return n.set(e.target.value)},children:a.map((function(e){return(0,D.jsx)(I.Z,{value:e,children:e},e)}))})})),de=(0,h.observer)((function(e){var n,r=e.slot;return(0,D.jsx)(f.FileSelector,{location:r.value,setLocation:function(e){return r.set(e)},name:r.name,description:r.description,rootModel:null===(n=(0,v.getEnv)(r).pluginManager)||void 0===n?void 0:n.rootModel})})),ue={string:ee,text:ne,fileLocation:de,stringArray:_,stringArrayMap:ae,numberMap:oe,number:se,integer:le,color:Q,stringEnum:ce,boolean:ie,frozen:Y.Z,configRelationships:Y.Z},xe=(0,p.ZL)()((function(e){return{paper:{display:"flex",marginBottom:e.spacing(2),position:"relative"},paperContent:{width:"100%"},slotModeSwitch:{width:24,background:e.palette.secondary.light,display:"flex",justifyContent:"center",alignItems:"center"}}})),pe=(0,h.observer)((function(e){var n=e.slot,r=e.slotSchema,t=xe().classes,a=n.type,o=n.isCallback?X:ue[a];return o||(console.warn("no slot editor defined for ".concat(a,", editing as string")),o=ee),a in ue||console.warn("SlotEditor needs to implement ".concat(a)),(0,D.jsxs)(F.Z,{className:t.paper,children:[(0,D.jsx)("div",{className:t.paperContent,children:(0,D.jsx)(o,{slot:n,slotSchema:r})}),(0,D.jsx)("div",{className:t.slotModeSwitch,children:n.contextVariable.length?(0,D.jsx)(N.Z,{onClick:function(){return n.isCallback?n.convertToValue():n.convertToCallback()},title:"convert to ".concat(n.isCallback?"regular value":"callback"),color:"secondary",children:n.isCallback?(0,D.jsx)(re,{}):(0,D.jsx)(W.Z,{})}):null})]})})),he=(0,h.observer)((function(e){var n=e.typeNameChoices,r=e.slot,t=e.slotName,a=e.onChange,o=xe().classes;return(0,D.jsx)(F.Z,{className:o.paper,children:(0,D.jsx)("div",{className:o.paperContent,children:(0,D.jsx)(g.Z,{value:r.type,label:"Type",select:!0,helperText:"Type of ".concat(t," to use"),fullWidth:!0,onChange:a,children:n.map((function(e){return(0,D.jsx)(I.Z,{value:e,children:e},e)}))})})})})),ve=(0,p.ZL)()((function(e){return{expandIcon:{color:"#fff"},root:{padding:e.spacing(1,3,1,1)},expansionPanelDetails:{display:"block",padding:e.spacing(1)},accordion:{border:"1px solid ".concat(e.palette.text.primary)},noOverflow:{width:"100%",overflowX:"auto"}}})),me=(0,h.observer)((function(e){var n,r=ve().classes,t=e.slotName,p=e.slotSchema,h=e.schema,v=e.slot,f=void 0===v?h[t]:v,Z=e.path,g=void 0===Z?[]:Z;if((0,l.isConfigurationSchemaType)(p)){if(f.length)return f.map((function(n,r){var a="".concat((0,m.singular)(t)," ").concat(r+1);return(0,s.createElement)(me,(0,o.Z)((0,o.Z)({},e),{},{key:a,slot:n,slotName:a}))}));var b=(0,l.getTypeNamesFromExplicitlyTypedUnion)(p);return b.length&&(n=(0,D.jsx)(he,{typeNameChoices:b,slotName:t,slot:f,onChange:function(e){e.target.value!==f.type&&h.setSubschema(t,{type:e.target.value})}})),(0,D.jsxs)(i.Z,{defaultExpanded:!0,className:r.accordion,children:[(0,D.jsx)(c.Z,{expandIcon:(0,D.jsx)(j.Z,{className:r.expandIcon}),children:(0,D.jsx)(d.Z,{children:[].concat((0,a.Z)(g),[t]).join("\u2794")})}),(0,D.jsxs)(u.Z,{className:r.expansionPanelDetails,children:[n,(0,D.jsx)(x.Z,{className:r.noOverflow,children:(0,D.jsx)(je,{schema:f,path:[].concat((0,a.Z)(g),[t])})})]})]})}return(0,l.isConfigurationSlotType)(p)?(0,D.jsx)(pe,{slot:f,slotSchema:p},t):null})),je=(0,h.observer)((function(e){var n=e.schema,r=e.path,a=void 0===r?[]:r,o=(0,v.getMembers)(n).properties;return(0,D.jsx)(D.Fragment,{children:Object.entries(o).map((function(e){var r=(0,t.Z)(e,2),o=r[0],s=r[1];return(0,D.jsx)(me,{slotName:o,slotSchema:s,path:a,schema:n},o)}))})})),fe=(0,h.observer)((function(e){var n=e.model,r=ve().classes,t=n.target,a=t&&(0,l.readConfObject)(t,"trackId"),o=t&&(0,l.readConfObject)(t,"name");return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(i.Z,{defaultExpanded:!0,className:r.accordion,children:[(0,D.jsx)(c.Z,{expandIcon:(0,D.jsx)(j.Z,{className:r.expandIcon}),children:(0,D.jsx)(d.Z,{children:null!==o&&void 0!==o?o:"Configuration"})}),(0,D.jsx)(u.Z,{className:r.expansionPanelDetails,"data-testid":"configEditor",children:t?(0,D.jsx)(je,{schema:t}):"no target set"})]},a),(0,D.jsx)("div",{style:{height:300}})]})}))}}]);
//# sourceMappingURL=9025.ac3eb71b.chunk.js.map